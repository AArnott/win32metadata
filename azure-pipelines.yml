# Universal Windows Platform
# Build a Universal Windows Platform project using Visual Studio.
# Add steps that test and distribute an app, save build artifacts, and more:
# https://aka.ms/yaml

trigger: none
pr: none

pool:
  name: Package ES Lab E

resources:
  pipelines:
    - pipeline: winsdk
      source: WinSDK Nuget
      version: 20195.1001.rs_onecore_dep.200815-1700

variables:
  buildPlatform: 'x64'
  buildConfiguration: 'Release'

steps:
- download: winsdk

- task: UseDotNet@2
  inputs:
    packageType: 'sdk'
    version: '3.x'

- script: |
    echo $(resources.pipeline.myresourcevars.pipelineID)
    echo $(resources.pipeline.myresourcevars.runName)
    echo $(resources.pipeline.myresourcevars.runID)
    echo $(resources.pipeline.myresourcevars.runURI)
    echo $(resources.pipeline.myresourcevars.sourceBranch)
    echo $(resources.pipeline.myresourcevars.sourceCommit)
    echo $(resources.pipeline.myresourcevars.sourceProvider)
    echo $(resources.pipeline.myresourcevars.requestedFor)
    echo $(resources.pipeline.myresourcevars.requestedForID)
        
- task: CmdLine@2
  inputs:
    script: |
      dir $(PIPELINE.WORKSPACE)/winsdk
      
#      call GenerateMetadataSource.cmd
      
#- task: NuGetToolInstaller@1

#- task: NuGetCommand@2
#  inputs:
#    restoreSolution: '$(solution)'

#- task: VSBuild@1
#  inputs:
#    platform: 'x86'
#    solution: '$(solution)'
#    configuration: '$(buildConfiguration)'
#    msbuildArgs: '/p:AppxBundlePlatforms="$(buildPlatform)" /p:AppxPackageDir="$(appxPackageDir)" /p:AppxBundle=Always /p:UapAppxPackageBuildMode=StoreUpload'
